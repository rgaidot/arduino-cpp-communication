#include <iostream>
#include "arduino.h"
#include <unistd.h>

using namespace std;

int main()
{
    try
    {
        /*
         *Changez le port /dev/ttyACM0 en fonction du port de l'arduino sur votre os
         *N'oubliez pas de donner les droits en lecture et ecriture sur le port
         *Un chmod 777 /dev/ttyACM0 peut faire l'affaire
         */
        Arduino arduino("/dev/ttyACM0",9600);
        //Exemple communication simple
        std::cout << arduino.getHelloResponse() << std::endl;

        //Exemple de commande avec reponse
        //faire clignoter une led
        for (int i = 0 ; i < 10 ; i++)
        {
            sleep(1);
            std::cout << "led : " << arduino.switchLed() << std::endl;
        }
    } catch(boost::system::system_error& e)
    {
        cout<<"Error: "<<e.what()<<endl;
    }
    return 0;
}

